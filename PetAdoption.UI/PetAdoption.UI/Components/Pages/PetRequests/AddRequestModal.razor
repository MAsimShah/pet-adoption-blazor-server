@inject IDialogService DialogService
@inject LoaderService Loader
@inject ISnackbar Snackbar
@inject IPetAdoptionAPI petAPI
@inject CustomAuthStateProvider AuthState
@inject IConfiguration Configuration

<MudDialog>
    <DialogContent>
        <EditForm Model="@model" OnValidSubmit="SaveRequest">
            <DataAnnotationsValidator />

            <MudGrid>
                <MudItem xs="12">
                    <MudStack Row="true">
                        <MudSelect T="int" Variant="Variant.Filled" Label="Species" @bind-Value="model.SpeciesId">
                            @foreach (var species in Enum.GetValues<Species>())
                            {
                                <MudSelectItem Value="@((int)species)">@species</MudSelectItem>
                            }
                        </MudSelect>

                        @if (model.PetList != null && model.PetList.Any())
                            {
                            <MudSelect Variant="Variant.Filled" Label="Pets" @bind-Value="model.PetId">
                                @foreach (var animalGender in model.PetList)
                                {

                                    <MudSelectItem Value="@animalGender.Id">@animalGender.Name</MudSelectItem>
                                }
                            </MudSelect>
                        }
                        else
                        {
                             <MudSelect T="string" Variant="Variant.Filled" Label="Pets">
                            </MudSelect>
                        }
                    </MudStack>
                </MudItem>
                <MudItem xs="12">
                    <MudDatePicker Label="Request Date" Editable="true" @bind-value="model.RequestDate" Placeholder="Select Date" />
                </MudItem>
                <MudItem xs="12">
                    <MudTextField Label="Message" @bind-Value="model.Message" Variant="Variant.Filled" />
                </MudItem>
            </MudGrid>

            <div class="d-flex justify-end">
                <MudButton Size="Size.Medium" OnClick="Cancel">Cancel</MudButton>
                <MudButton Size="Size.Medium" Color="Color.Primary" ButtonType="ButtonType.Submit">Save</MudButton>
            </div>
        </EditForm>
    </DialogContent>
</MudDialog>